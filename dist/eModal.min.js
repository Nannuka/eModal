(function(a){a(["jquery"],function(z,u){var O;var D="recycle-bin";var p="<div>";var d="";var s="click";var c="hide";var P="shown.bs.modal";var e="submit";var G="eFooter";var k=c+".bs.modal";var i="input";var M="danger";var N={OK:"Cancel",True:"False",Yes:"No"};var y={};var j="modal-body";var q=".modal-dialog";var t={};var v="modal-rec";var w={sm:"sm",lg:"lg",xl:"xl"};var E="modal-tmp";var Q={allowContentRecycle:true,confirmLabel:Object.keys(N)[0],labels:N,loadingHtml:'<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped active" style="width: 100%"></div></div>',size:d,title:"Attention",autofocus:false};u=u||{};u.addLabel=b;u.ajax=A;u.alert=B;u.close=I;u.confirm=J;u.emptyBin=L;u.iframe=m;u.prompt=F;u.setId=C;u.setEModalOptions=h;u.setModalOptions=l;u.size=w;u.version="1.2.67";return u;function H(R){O.modal(t).find(".modal-content").append(R)}function o(){var T;var R;try{R=require("Q")}catch(S){R=window.Q}if(R){T=R.defer()}else{T=z.Deferred();T.promise=T.promise()}T.promise.element=g(true).find(q);return T}function x(W){if(W===false){return d}var X=z(p).addClass("modal-footer").prop("id",G);if(W){for(var U=0,R=W.length;U<R;U++){var Y=W[U];var T=z("<button>").addClass("btn btn-"+(Y.style||"primary"));for(var S in Y){if(Y.hasOwnProperty(S)){switch(S){case"close":if(Y[S]){T.attr("data-dismiss","modal").addClass("x")}break;case s:var V=Y.click.bind(g(true).find(".modal-content"));T.click(V);break;case"text":T.html(Y[S]);break;default:T.attr(S,Y[S])}}}X.append(T)}}else{X.append('<button class="x btn btn-primary" data-dismiss=modal type=button>Close</button>')}return X}function f(T){var R;var S=T.loading?Q.loadingHtml:(T.message||T);if(S.on||S.onclick){R=T.clone===true?z(S).clone():z(S);R.addClass(T.useBin&&!T.loading?v:E)}else{R=z(p).attr("style","position:relative;word-wrap:break-word;").addClass(j).html(S)}return T.css&&(T.css!==R.css&&R.css(T.css)),R}function g(R){if(!O){if(!z("#"+D).length){z("body").append(z(p).prop("id",D).hide())}O=S()}if(R&&O){return O}if(Q.autofocus){O.on(P,function(){z(this).find(i).first().focus()})}return O;function S(){return z('<div class="modal fade" tabindex="-1"><style>.modal-xl{width:96%;}.modal-body{max-height: calc(100vh - 145px);overflow-y: auto;}</style><div class=modal-dialog role="document"><div class=modal-content> <div class=modal-header><h5 class=modal-title></h5><button type=button class="x close" data-dismiss=modal aria-label="Close"><span aria-hidden=true>&times;</span></button></div></div></div></div>').on("hidden.bs.modal",r).on(s,"button.x",function(U){var T=z(U.currentTarget);if(T.prop("type")!==e){return O.modal(c)}try{if(T.closest("form")[0].checkValidity()){return I()}}catch(V){return I()}return O})}}function K(X){var S=z.fn.jquery.split(".");var W=X.split(".");var Y=S[0];var U=S[1];var R=S[2];var Z=W[0];var V=W[1];var T=W[2];return !((Z>Y)||(Z===Y&&V>U)||(Z===Y&&V===U&&T>R))}function r(){if(!O){return}var R=O.find("."+v).removeClass(v).appendTo("#"+D);O.off(k).off(P).find(".modal-content > div:not(:first-child)").remove();if(!Q.allowContentRecycle||y.clone){R.remove()}}function n(U,T){if(!U){throw new Error("Invalid parameters!")}r();y=U;var S=g();var R="modal-"+(U.size||Q.size);S.find(q).removeClass("modal-sm modal-lg modal-xl").addClass(U.size||Q.size?R:null);S.find(".modal-title").html((U.title||T||Q.title)+" ").append(z("<small>").html(U.subtitle||d));S.on(k,U.onHide)}function b(S,R){N[S]=R}function A(U,W){var R=o();if(typeof U==="object"){h(U)}var V={async:true,deferred:R,xhrFields:{withCredentials:false},loading:true,title:W||Q.title,url:U.url||U,dataType:U.dataType||"text"};if(U.url){z.extend(V,U)}z.ajax(V).done(T).fail(S);return B(V,W);function T(X){O.find("."+j).html(U.success?U.success(X):X);return R.resolve(O)}function S(X,Z){var Y=U.error?U.error(X,Z,V):'<div class="alert alert-danger"><strong>XHR Fail: </strong>URL [ '+V.url+"] load fail.</div>";O.find("."+j).html(Y);return R.reject(X)}}function B(T,U){n(T,U);var R=T.deferred||o();if(typeof T==="object"){h(T)}var S=z(p).append(f(T),x(T.buttons));H(S);if(!T.async){O.on(P,R.resolve)}return R.promise}function J(T,U){var R=o();if(typeof T==="object"){h(T)}return B({async:true,buttons:[{close:true,click:S,text:N[T.label]?N[T.label]:N[Q.confirmLabel],style:T.style&&T.style[0]||M},{close:true,click:S,text:N[T.label]?T.label:Q.confirmLabel,style:T.style&&T.style[1]}],deferred:R,message:T.message||T,onHide:S,size:T.size,title:T.title||U});function S(W){I();var V=z(W.currentTarget).html();return N[V]?R.resolve():R.reject()}}function m(Y,X){var S=o();if(typeof data==="object"){h(data)}var T=Y.data?Object.keys(Y.data).map(W).join(" "):"";var U=('<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%</div><iframe class="embed-responsive-item" frameborder=0 src="%0%" %2% style="width:100%;height:75vh;display:block;"/>').replace("%0%",Y.message||Y.url||Y).replace("%1%",Q.loadingHtml).replace("%2%",T);var V=K("3.0.0")?z(U).on("load",R):z(U).load(R);return B({async:true,buttons:Y.buttons||false,deferred:S,message:V,size:Y.size||w.xl,title:Y.title||X});function W(Z){return Z+'="'+Y.data[Z]+'"'}function R(){z(this).parent().find("div."+E).fadeOut(function(){z(this).remove()});return S.resolve()}}function L(){return z("#"+D+" > *").remove()}function F(U,Y){var Z=o();if(typeof U==="object"){h(U)}var S={deferred:Z};if(typeof U==="object"){z.extend(S,U)}else{S.message=U;S.title=Y}S.async=true;if(S.buttons){var R;for(var V=0,T=S.buttons.length;V<T;V++){R=S.buttons[V];R.style=(R.style||"default")+" pull-left";R.type=R.type||"button"}}var X=x([{close:true,type:"reset",text:N.OK,style:M},{close:false,type:e,text:Q.confirmLabel}].concat(S.buttons||[]));S.buttons=false;S.onHide=W;S.message=z('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(S.message||d)+'</label><input type=text class=form-control required autocomplete="on" value="'+(S.value||d)+(S.pattern?'" pattern="'+S.pattern:d)+'"></div></form>').append(X).on(e,W);return B(S);function W(aa){var ab=O.find(i).val();I();aa.type!==e?Z.reject(ab):Z.resolve(ab);return false}}function C(R){g(true).find(q).prop("id",R)}function h(R){return z.extend(Q,R)}function l(R){O&&O.remove();return z.extend(t,R)}function I(){if(O){O.off(k).modal(c)}return O}})}(typeof define=="function"&&define.amd?define:function(a,b){this.eModal=typeof module!="undefined"&&module.exports?b(require(a[0],{}),module.exports):b(window.$)}));
